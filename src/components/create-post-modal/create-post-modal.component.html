<div class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fade-in" (click)="onClose()">
  <div class="bg-slate-900 rounded-lg shadow-2xl w-full max-w-2xl" (click)="$event.stopPropagation()">
    <div class="flex justify-between items-center p-6 border-b border-slate-700">
      <h2 class="text-2xl font-bold">{{ (isEditing() ? 'forumEditPost' : 'forumCreateNewPost') | translate }}</h2>
      <button (click)="onClose()" class="text-slate-400 hover:text-white transition">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    
    <form (ngSubmit)="onSave()" class="p-6 space-y-4">
      <div>
        <label for="post-title" class="block text-slate-300 mb-2 font-semibold">{{ 'title' | translate }}</label>
        <input 
          id="post-title" 
          type="text" 
          [(ngModel)]="title"
          name="title"
          required
          class="w-full p-3 bg-slate-800 border border-slate-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
          placeholder="{{ 'forumTitlePlaceholder' | translate }}">
      </div>
      
      <div>
        <label for="post-category" class="block text-slate-300 mb-2 font-semibold">{{ 'forumCategory' | translate }}</label>
        <select 
          id="post-category" 
          [(ngModel)]="category"
          name="category"
          required
          class="w-full p-3 bg-slate-800 border border-slate-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary">
          @for(cat of categories(); track cat) {
            <option [value]="cat">{{ ('forum' + cat) | translate }}</option>
          }
        </select>
      </div>

      <div>
        <label for="post-content" class="block text-slate-300 mb-2 font-semibold">{{ 'forumContent' | translate }}</label>
        <textarea 
          id="post-content" 
          rows="8"
          [(ngModel)]="content"
          name="content"
          required
          class="w-full p-3 bg-slate-800 border border-slate-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
          placeholder="{{ 'forumContentPlaceholder' | translate }}"></textarea>
      </div>
      
      <div class="flex justify-end gap-4 pt-4">
        <button type="button" (click)="onClose()" class="bg-slate-700 hover:bg-slate-600 text-white px-6 py-2 rounded-md font-bold transition">
          {{ 'cancel' | translate }}
        </button>
        <button 
          type="submit" 
          [disabled]="!title().trim() || !content().trim() || !category()"
          class="bg-primary text-white px-6 py-2 rounded-md font-bold hover:bg-red-700 transition disabled:bg-slate-600 disabled:cursor-not-allowed">
          {{ (isEditing() ? 'forumSaveChanges' : 'forumPublishPost') | translate }}
        </button>
      </div>
    </form>
  </div>
</div>
